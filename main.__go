package main

import (
	"flag"
	"fmt"
	"gogen3/command2"
	"gogen3/command2/genusecase"
)

func main() {

	commandMap := map[string]command2.Runner{
		"usecase": &genusecase.GenerateUsecase{},
	}

	flag.Parse()
	cmd := flag.Arg(0)

	if cmd == "" {
		fmt.Printf("Try one of this command to learn how to use it\n")
		for k := range commandMap {
			fmt.Printf("  gogen %s\n", k)
		}
		return
	}

	var values = make([]string, 0)
	if flag.NArg() > 1 {
		values = flag.Args()[1:]
	}

	f, exists := commandMap[cmd]
	if !exists {
		fmt.Printf("Command %s is not recognized\n", cmd)
		return
	}

	err := f.Run(values...)
	if err != nil {
		fmt.Printf("%s\n", err.Error())
		return
	}

}
